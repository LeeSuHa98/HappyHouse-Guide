{"ast":null,"code":"import _slicedToArray from\"C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';// import '../Css/test.css'; import DeleteReply from './DeleteReply.js'; import\n// CreateReply from './CreateReply.js';\nimport $ from'jquery';import{Button,Col,Container,Form,FormGroup,Input,InputGroup,InputGroupAddon,InputGroupText,Modal,ModalHeader,Row,Table}from'reactstrap';import axios from'axios';import'./community.css';import Moment from'react-moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ReadCommunity(props){var _useState=useState(props._id),_useState2=_slicedToArray(_useState,2),_id=_useState2[0],set_id=_useState2[1];var _useState3=useState(props),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),writeDate=_useState6[0],setWriteDate=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),title=_useState8[0],setTitle=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),content=_useState10[0],setContent=_useState10[1];var handleChangeUserId=function handleChangeUserId(e){e.preventDefault();setUserId(e.target.value);};var handleChangeWriteDate=function handleChangeWriteDate(e){e.preventDefault();setWriteDate(e.target.value);};var handleChangeTitle=function handleChangeTitle(e){e.preventDefault();setTitle(e.target.value);};var handleChangeContent=function handleChangeContent(e){e.preventDefault();setContent(e.target.value);};// const toggleIsReadOnly = () => {     setIsReadOnly(!isReadOnly); }\nvar readCommunity=function readCommunity(){var form={_id:localStorage.getItem(\"community_id\")};axios.post('/happyhouse/communities/detail',form).then(function(res){console.log(res.data);console.log(res.data.communitys.userId);setUserId(res.data.communitys.userId);setWriteDate(res.data.communitys.writeDate);setTitle(res.data.communitys.title);setContent(res.data.communitys.content);}).catch(function(error){console.log(error);});};//   function getReplyList(form) {\n//     var form = new FormData;\n//     form.append(\"postId\", postId);\n//     axios\n//         .post('/community/readReply', form)\n//         .then((response) => {\n//             setReplyArrays(response.data);\n//             setTableData(replyArrays.map(renderInput));\n//         });\n// }\nvar updateCommunity=function updateCommunity(){// let newDate = new Date();\nvar form={userId:localStorage.getItem(\"userID\"),_id:localStorage.getItem(\"community_id\"),title:title,content:content// writeDate: writeDate\n};console.log('수정커뮤니티',form);axios.post('/happyhouse/communities/update',form).then(function(res){alert(\"게시글 수정 완료\");window.location.href='/communities';});};var deleteCommunity=function deleteCommunity(){var form={_id:localStorage.getItem(\"community_id\")};axios.post('/happyhouse/communities/delete',form).then(function(res){alert(\"커뮤니티 삭제 완료\");window.location.href='/communities';});};// const createReply = () => {\n//     var form = new FormData;\n//     form.append('userToken', localStorage.getItem(\"userToken\"));\n//     form.append('postId', postId);\n//     form.append('reply', reply);\n//     axios\n//         .post(\"/community/createReply\", form, {\n//             headers: {\n//                 'content-type': 'multipart/form-data'\n//             }\n//         })\n//         .then((response) => {\n//             window\n//                 .location\n//                 .reload();\n//         })\n// }\nuseEffect(function(){readCommunity();//게시글 상세조회\n// getReplyList(form);\n},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"dv\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"createCommunity\",children:/*#__PURE__*/_jsx(\"div\",{className:\"community-title\",children:/*#__PURE__*/_jsx(\"div\",{id:\"title\",children:\"\\uCEE4\\uBBA4\\uB2C8\\uD2F0 \\uC791\\uC131\"})})}),/*#__PURE__*/_jsxs(\"div\",{class:\"community-block\",children:[/*#__PURE__*/_jsx(\"td\",{id:\"header\",children:/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(Input,{name:\"title\",onChange:handleChangeTitle,value:title})})}),/*#__PURE__*/_jsx(\"div\",{class:\"community-content\",children:/*#__PURE__*/_jsx(Input,{name:\"content\",type:\"textarea\",Rows:\"7\",onChange:handleChangeContent,value:content})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"review-upload\",onClick:updateCommunity,children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{id:\"review-upload\",onClick:deleteCommunity,children:\"\\uC0AD\\uC81C\"}),/*#__PURE__*/_jsx(\"button\",{id:\"review-upload\",onClick:function onClick(){window.location.href='/communities';},style:{float:'left'},children:\"\\uCDE8\\uC18C\"})]}),/*#__PURE__*/_jsx(\"br\",{})]})]});}export default ReadCommunity;","map":{"version":3,"sources":["C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/src/source/ReadCommunity.js"],"names":["React","useEffect","useState","$","Button","Col","Container","Form","FormGroup","Input","InputGroup","InputGroupAddon","InputGroupText","Modal","ModalHeader","Row","Table","axios","Moment","ReadCommunity","props","_id","set_id","userId","setUserId","writeDate","setWriteDate","title","setTitle","content","setContent","handleChangeUserId","e","preventDefault","target","value","handleChangeWriteDate","handleChangeTitle","handleChangeContent","readCommunity","form","localStorage","getItem","post","then","res","console","log","data","communitys","catch","error","updateCommunity","alert","window","location","href","deleteCommunity","float"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\n// import '../Css/test.css'; import DeleteReply from './DeleteReply.js'; import\r\n// CreateReply from './CreateReply.js';\r\nimport $ from 'jquery';\r\nimport {\r\n    Button,\r\n    Col,\r\n    Container,\r\n    Form,\r\n    FormGroup,\r\n    Input,\r\n    InputGroup,\r\n    InputGroupAddon,\r\n    InputGroupText,\r\n    Modal,\r\n    ModalHeader,\r\n    Row,\r\n    Table\r\n} from 'reactstrap';\r\nimport axios from 'axios';\r\nimport './community.css'\r\nimport Moment from 'react-moment'\r\n\r\nfunction ReadCommunity(props) {\r\n\r\n    const [_id, set_id] = useState(props._id);\r\n    const [userId, setUserId] = useState(props);\r\n    const [writeDate, setWriteDate] = useState();\r\n    const [title, setTitle] = useState();\r\n    const [content, setContent] = useState();\r\n    const handleChangeUserId = (e) => {\r\n        e.preventDefault();\r\n        setUserId(e.target.value);\r\n    }\r\n    const handleChangeWriteDate = (e) => {\r\n        e.preventDefault();\r\n        setWriteDate(e.target.value);\r\n    }\r\n    const handleChangeTitle = (e) => {\r\n        e.preventDefault();\r\n        setTitle(e.target.value);\r\n    }\r\n    const handleChangeContent = (e) => {\r\n        e.preventDefault();\r\n        setContent(e.target.value);\r\n    }\r\n\r\n    // const toggleIsReadOnly = () => {     setIsReadOnly(!isReadOnly); }\r\n\r\n    const readCommunity = () => {\r\n\r\n        var form = {\r\n            _id: localStorage.getItem(\"community_id\")\r\n        };\r\n        axios\r\n            .post('/happyhouse/communities/detail', form)\r\n            .then((res) => {\r\n\r\n                console.log(res.data);\r\n                console.log(res.data.communitys.userId);\r\n                setUserId(res.data.communitys.userId);\r\n                setWriteDate(res.data.communitys.writeDate);\r\n                setTitle(res.data.communitys.title);\r\n                setContent(res.data.communitys.content);\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n        }\r\n\r\n//   function getReplyList(form) {\r\n//     var form = new FormData;\r\n//     form.append(\"postId\", postId);\r\n//     axios\r\n//         .post('/community/readReply', form)\r\n//         .then((response) => {\r\n//             setReplyArrays(response.data);\r\n//             setTableData(replyArrays.map(renderInput));\r\n//         });\r\n// }\r\nconst updateCommunity = () => {\r\n   // let newDate = new Date();\r\n    var form = {\r\n        userId: localStorage.getItem(\"userID\"),\r\n        _id: localStorage.getItem(\"community_id\"),\r\n        title: title,\r\n        content: content,\r\n       // writeDate: writeDate\r\n    };\r\n    \r\n    console.log('수정커뮤니티', form);\r\n    \r\n    axios\r\n    .post('/happyhouse/communities/update', form).then((res) => {\r\n       \r\n        alert(\"게시글 수정 완료\")\r\n        window.location.href ='/communities'\r\n    })\r\n}\r\nconst deleteCommunity = () => {\r\n    var form = {\r\n        _id: localStorage.getItem(\"community_id\")\r\n    };\r\n    axios\r\n        .post('/happyhouse/communities/delete', form)\r\n        .then((res) => {\r\n            alert(\"커뮤니티 삭제 완료\");\r\n            window.location.href = '/communities'\r\n        })\r\n}\r\n// const createReply = () => {\r\n//     var form = new FormData;\r\n//     form.append('userToken', localStorage.getItem(\"userToken\"));\r\n//     form.append('postId', postId);\r\n//     form.append('reply', reply);\r\n//     axios\r\n//         .post(\"/community/createReply\", form, {\r\n//             headers: {\r\n//                 'content-type': 'multipart/form-data'\r\n//             }\r\n//         })\r\n//         .then((response) => {\r\n//             window\r\n//                 .location\r\n//                 .reload();\r\n//         })\r\n// }\r\n\r\n    useEffect(() => {\r\n    \r\n        readCommunity(); //게시글 상세조회\r\n        // getReplyList(form);\r\n    }, [])\r\n    return (\r\n       \r\n        <div className=\"dv\">\r\n    \r\n  <div className=\"createCommunity\">\r\n                <div className=\"community-title\">\r\n                    <div id=\"title\">커뮤니티 작성</div>\r\n                </div>\r\n\r\n            </div>\r\n            \r\n                <div class=\"community-block\">\r\n                   \r\n                    <td id=\"header\">\r\n                        <h4>\r\n                            <Input name=\"title\" onChange={handleChangeTitle} value={title}></Input>\r\n                        </h4>\r\n                    </td>\r\n{/* \r\n                    <div>\r\n                        <table class=\"houseInfo\">\r\n                            <tr>\r\n                                <td id=\"a\">작성자</td>\r\n                                <td>{userId}</td>\r\n                                <td id=\"a\">작성일</td>\r\n                                <td>\r\n                                    <Moment format=\"YY.MM.DD\">{writeDate}</Moment>\r\n                                </td>\r\n                            </tr>\r\n                        </table>\r\n                    </div> \r\n    */}\r\n                     <div class=\"community-content\">\r\n                        <Input\r\n                            name=\"content\"\r\n                            type=\"textarea\"\r\n                            Rows=\"7\"\r\n                            onChange={handleChangeContent}\r\n                            value={content}></Input>\r\n                    </div>  \r\n                    <br></br>\r\n                   <div className=\"button-container\">\r\n                <button id=\"review-upload\" onClick={updateCommunity}>수정</button>\r\n                  <button id=\"review-upload\" onClick={deleteCommunity}>삭제</button>\r\n                  <button id=\"review-upload\" onClick = {()=>{window.location.href ='/communities'}} style={{float: 'left'}}>취소</button>\r\n                </div> \r\n                    \r\n                    <br></br>\r\n                 </div> \r\n\r\n        \r\n           \r\n\r\n            {/* <Modal isOpen={modalCreateReply}>\r\n                        <ModalHeader toggle={toggleCreateReply}>댓글 등록</ModalHeader>\r\n\r\n                         <CreateReply postId={modalInput}></CreateReply>\r\n            </Modal>\r\n            <Modal isOpen={modalDeleteReply}>\r\n                        <ModalHeader toggle={toggleDeleteReply}>댓글 삭제</ModalHeader>\r\n\r\n                         <DeleteReply postId={modalInput}></DeleteReply>\r\n            </Modal> */\r\n            }\r\n            {/* <InputGroup>\r\n                    <InputGroupAddon addonType=\"prepend\">\r\n                        <InputGroupText>댓글</InputGroupText>\r\n                    </InputGroupAddon>\r\n                    <Input\r\n                        type=\"textarea\"\r\n                        name=\"content\"\r\n                        placeholder=\"댓글\"\r\n                        onChange={handleReplyOnChange}\r\n                        value={reply}></Input>\r\n                </InputGroup>\r\n                <Button\r\n                    className=\"btn btn-primary btn-block w-25\"\r\n                    color={\"primary\"}\r\n                    style={{\r\n                        float: 'right'\r\n                    }}\r\n                    type=\"post\"\r\n                    onClick={createReply}>{\"댓글작성\"}</Button> */\r\n            }\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default ReadCommunity;\r\n"]},"metadata":{},"sourceType":"module"}