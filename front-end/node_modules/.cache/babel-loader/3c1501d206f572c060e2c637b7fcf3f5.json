{"ast":null,"code":"import _objectSpread from\"C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import Moment from'react-moment';import HappyChart from'./Chart';import numeral from'numeral';import axios from'axios';import Slider from\"react-slick\";import{FormText,Spinner}from'reactstrap';import'./css/Sidebar.css';import undo from'../Image/undo.png';import like1 from'../Image/like.png';import like2 from'../Image/like-toggle.png';import star from'../Image/star.png';import\"slick-carousel/slick/slick.css\";import\"slick-carousel/slick/slick-theme.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var SideBar=function SideBar(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setIsLoading=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),typeIndex=_useState4[0],SetTypeIndex=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLike=_useState6[0],setIsLike=_useState6[1];useEffect(function(){loadDibsData(props.houseDetail.danjiCode);loadReview(props.houseDetail.danjiCode);loadReviewPicture(props.houseDetail.danjiCode);},[props.houseDetail.danjiCode]);function loadDibsData(code){setIsLoading(true);var userId=localStorage.getItem(\"userID\");setIsLike(false);axios.get(\"https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/dibs/\".concat(userId,\"/\").concat(code)).then(function(_ref){var data=_ref.data;data=data.dibs;if(data[0]!=null){setIsLike(true);}setIsLoading(false);});}function changeImage(){var temp=document.getElementById(\"tmp\").src.includes(\"-toggle\");var insertForm={userId:localStorage.getItem(\"userID\"),danjiCode:props.houseDetail.danjiCode,danjiName:props.houseDetail.danjiName};var deleteForm={userId:localStorage.getItem(\"userID\"),danjiCode:props.houseDetail.danjiCode};if(temp==false){setIsLike(true);axios.post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/dibs',insertForm).then(function(res){// window.location.reload();\n}).catch(function(error){console.log(error);});}else{setIsLike(false);axios.delete('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/dibs',{data:deleteForm}).then(function(res){// window.location.reload();\n}).catch(function(error){console.log(error);});}}var typeButton=function typeButton(list){return list.map(function(data,index){return/*#__PURE__*/_jsx(\"button\",{id:\"typeButton\",onClick:function onClick(){return SetTypeIndex(index);},children:data.typeName});});};// review\nvar _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),lastThreeReview=_useState8[0],setReview=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),pictureSrc=_useState10[0],setPicture=_useState10[1];function loadReview(code){var url=\"https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/reviews/houseid/\".concat(code,\"/lastThree\");axios.get(url).then(function(_ref2){var data=_ref2.data;setReview(data.reviews.map(reviews));});}var reviews=function reviews(review){return/*#__PURE__*/_jsx(\"li\",{id:\"li-reivew\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"rev-title\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"rev-title1\",children:review.title}),/*#__PURE__*/_jsxs(\"div\",{id:\"rev-title2\",children:[/*#__PURE__*/_jsx(\"img\",{src:star,className:\"starImg\"}),review.star]})]})});};function loadReviewPicture(code){var url=\"https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/reviews/houseid/\".concat(code,\"/onlyPicture\");axios.get(url).then(function(_ref3){var data=_ref3.data;setPicture(data.reviews.map(pictureSource));});}var pictureSource=function pictureSource(review){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:review.picture,id:\"reviewImg\"})});};function makeCarousel(){var settings={dots:false,infinite:true,speed:150,autoplay:true,slidesToShow:1,slidesToScroll:1};return/*#__PURE__*/_jsx(Slider,_objectSpread(_objectSpread({},settings),{},{children:pictureSrc}));}return/*#__PURE__*/_jsx(\"div\",{className:\"side-bar-wrap\",children:isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"side-bar\",id:\"sideBar\",style:{display:\"none\"},children:/*#__PURE__*/_jsx(\"div\",{class:\"loading-wrap\",children:/*#__PURE__*/_jsx(Spinner,{style:{width:'3rem',height:'3rem'},color:\"primary\"})})}):/*#__PURE__*/_jsxs(\"div\",{className:\"side-bar\",id:\"sideBar\",style:{display:\"none\"},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"beforeContent\",children:[/*#__PURE__*/_jsx(\"img\",{alt:\"sidebar hide\",src:undo,id:\"sidebarHide\",onClick:function onClick(){props.toggle();},className:\"toggle-menu\"}),isLike?/*#__PURE__*/_jsx(\"img\",{id:\"tmp\",alt:\"like\",src:like2,className:\"likeImage\",onClick:function onClick(){return changeImage();}}):/*#__PURE__*/_jsx(\"img\",{id:\"tmp\",alt:\"like\",src:like1,className:\"likeImage\",onClick:function onClick(){return changeImage();}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"imageSection\",children:pictureSrc!=null?makeCarousel():/*#__PURE__*/_jsx(\"div\",{})}),/*#__PURE__*/_jsx(\"div\",{id:\"houseInfoSection1\",children:/*#__PURE__*/_jsxs(\"table\",{className:\"houseInfoTable1\",children:[/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{class:\"houseName\",colSpan:\"2\",children:props.houseDetail.danjiName})}),/*#__PURE__*/_jsx(\"tr\",{children:/*#__PURE__*/_jsx(\"td\",{className:\"houseAddress\",children:props.houseDetail.address})})]})}),/*#__PURE__*/_jsxs(\"div\",{id:\"houseInfoSection2\",children:[/*#__PURE__*/_jsx(\"div\",{class:\"test2\",children:\"\\uC8FC\\uD0DD\\uC815\\uBCF4\"}),/*#__PURE__*/_jsx(\"div\",{class:\"typeGroup\",children:typeButton(props.houseDetail.houseDetailInfo)}),/*#__PURE__*/_jsxs(\"table\",{class:\"houseInfoTable2\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"td1\",children:\"\\uC8FC\\uD0DD\\uD615\"}),/*#__PURE__*/_jsx(\"td\",{children:props.houseDetail.houseDetailInfo[typeIndex].typeName})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"td1\",children:\"\\uACF5\\uAE09\\uC138\\uB300\"}),/*#__PURE__*/_jsxs(\"td\",{children:[props.houseDetail.houseHoldNum,\" \\uC138\\uB300\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"td1\",children:\"\\uC900\\uACF5\\uC77C\\uC790\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Moment,{format:\"YYYY / MM / DD\",children:props.houseDetail.competeDate})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"td1\",children:\"\\uC784\\uB300 \\uBCF4\\uC99D\\uAE08\"}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",props.houseDetail.houseDetailInfo[typeIndex].bassRentDeposit.substring(0,4),\" \\uB9CC\\uC6D0\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"td1\",children:\"\\uC6D4 \\uC784\\uB300\\uB8CC\"}),/*#__PURE__*/_jsxs(\"td\",{children:[props.houseDetail.houseDetailInfo[typeIndex].bassMonthlyRentCharge.substring(0,2),\" \\uB9CC\\uC6D0\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"td1\",children:\"\\uC804\\uD658 \\uBCF4\\uC99D\\uAE08\"}),/*#__PURE__*/_jsxs(\"td\",{children:[numeral(props.houseDetail.houseDetailInfo[typeIndex].bassConversionDeposit).format('0,0'),\" \\uB9CC\\uC6D0\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"td1\",children:\"\\uACF5\\uACF5 \\uACF5\\uC6A9\\uBA74\\uC801\"}),/*#__PURE__*/_jsxs(\"td\",{children:[props.houseDetail.houseDetailInfo[typeIndex].suplyCommuseArea,\" (\\u33A1)\"]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"td1\",children:\" \\uAC1C\\uC778 \\uACF5\\uC6A9\\uBA74\\uC801\"}),/*#__PURE__*/_jsxs(\"td\",{children:[props.houseDetail.houseDetailInfo[typeIndex].suplyPrivateArea,\" (\\u33A1)\"]})]})]}),/*#__PURE__*/_jsx(HappyChart,{danjiName:props.houseDetail.danjiName,convenience:props.houseDetail.convenience,safety:props.houseDetail.safety,medical:props.houseDetail.medical})]})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"houseInfoSection4\",children:[/*#__PURE__*/_jsxs(\"div\",{class:\"test2\",children:[\"\\uAC70\\uC8FC\\uD6C4\\uAE30\",/*#__PURE__*/_jsx(\"button\",{id:\"moreReview\",onClick:function onClick(){localStorage.setItem(\"danjiCode\",props.houseDetail.danjiCode);window.location.href='/reviews/create';},children:\"\\uAC70\\uC8FC\\uD6C4\\uAE30 \\uC791\\uC131\"}),/*#__PURE__*/_jsx(\"button\",{id:\"moreReview\",onClick:function onClick(){localStorage.setItem(\"danjiCode\",props.houseDetail.danjiCode);window.location.href='/reviews';},children:\"\\uB354\\uBCF4\\uAE30\"})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{class:\"rt\",children:lastThreeReview})})]})]})});};export default/*#__PURE__*/React.memo(SideBar);","map":{"version":3,"sources":["C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/src/source/SideBar.js"],"names":["React","useState","useEffect","Moment","HappyChart","numeral","axios","Slider","FormText","Spinner","undo","like1","like2","star","SideBar","props","isLoading","setIsLoading","typeIndex","SetTypeIndex","isLike","setIsLike","loadDibsData","houseDetail","danjiCode","loadReview","loadReviewPicture","code","userId","localStorage","getItem","get","then","data","dibs","changeImage","temp","document","getElementById","src","includes","insertForm","danjiName","deleteForm","post","res","catch","error","console","log","delete","typeButton","list","map","index","typeName","lastThreeReview","setReview","pictureSrc","setPicture","url","reviews","review","title","pictureSource","picture","makeCarousel","settings","dots","infinite","speed","autoplay","slidesToShow","slidesToScroll","display","width","height","toggle","address","houseDetailInfo","houseHoldNum","competeDate","bassRentDeposit","substring","bassMonthlyRentCharge","bassConversionDeposit","format","suplyCommuseArea","suplyPrivateArea","convenience","safety","medical","setItem","window","location","href","memo"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport Moment from 'react-moment'\r\nimport HappyChart from './Chart';\r\nimport numeral from 'numeral'\r\nimport axios from 'axios';\r\nimport Slider from \"react-slick\";\r\nimport { FormText, Spinner } from 'reactstrap';\r\n\r\nimport './css/Sidebar.css';\r\n\r\nimport undo from '../Image/undo.png'\r\nimport like1 from '../Image/like.png'\r\nimport like2 from '../Image/like-toggle.png'\r\nimport star from '../Image/star.png'\r\n\r\n\r\nimport \"slick-carousel/slick/slick.css\"; \r\nimport \"slick-carousel/slick/slick-theme.css\";\r\n\r\n\r\n\r\nconst SideBar = (props) => {\r\n\r\n    const [isLoading, setIsLoading] = useState(true)\r\n    const [typeIndex, SetTypeIndex] = useState(0)\r\n    const [isLike, setIsLike] = useState(false);\r\n    \r\n    useEffect(() => {\r\n      loadDibsData(props.houseDetail.danjiCode)\r\n      loadReview(props.houseDetail.danjiCode)\r\n      loadReviewPicture(props.houseDetail.danjiCode)\r\n    },[props.houseDetail.danjiCode])\r\n\r\n    function loadDibsData (code) {\r\n      setIsLoading(true)\r\n      var userId = localStorage.getItem(\"userID\")\r\n      \r\n      setIsLike(false)\r\n      axios.get(`https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/dibs/${userId}/${code}`).then(({data}) => {\r\n        data = data.dibs\r\n        if (data[0] != null){\r\n          setIsLike(true)\r\n        }\r\n        \r\n        setIsLoading(false)\r\n      }) \r\n    }\r\n\r\n\r\n    function changeImage(){\r\n      var temp = document.getElementById(\"tmp\").src.includes(\"-toggle\")\r\n      \r\n      var insertForm={\r\n        userId : localStorage.getItem(\"userID\"),\r\n        danjiCode : props.houseDetail.danjiCode,\r\n        danjiName : props.houseDetail.danjiName\r\n        };\r\n\r\n        var deleteForm={\r\n          userId : localStorage.getItem(\"userID\"),\r\n          danjiCode : props.houseDetail.danjiCode,\r\n          };\r\n\r\n       if(temp == false){\r\n        setIsLike(true)\r\n        \r\n        axios.post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/dibs', insertForm).then((res) => {\r\n        // window.location.reload();\r\n        }).catch(function (error){\r\n        console.log(error)  \r\n       })\r\n       \r\n      }\r\n\r\n      else{\r\n        setIsLike(false)\r\n        \r\n        axios.delete('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/dibs', {data:deleteForm}).then((res) => {\r\n        // window.location.reload();\r\n        }).catch(function (error){\r\n        console.log(error)  \r\n       })\r\n       \r\n      }\r\n      \r\n    }\r\n\r\n\r\n    const typeButton = (list) =>{\r\n        return list.map((data, index)=>(\r\n                <button id = \"typeButton\" onClick = {()=>SetTypeIndex(index)}>{data.typeName}</button>\r\n        ))\r\n    }\r\n\r\n  // review\r\n  const [lastThreeReview, setReview] = useState([]);\r\n  const [pictureSrc, setPicture] = useState([]);\r\n\r\n  function loadReview (code) {\r\n    var url = `https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/reviews/houseid/${code}/lastThree`\r\n      axios.get(url).then(({data}) => { \r\n        setReview(data.reviews.map(reviews))  \r\n      })\r\n  }\r\n  \r\n  const reviews = (review) => (\r\n    <li id=\"li-reivew\">\r\n      <div class = \"rev-title\">\r\n        <div id=\"rev-title1\">{review.title}</div>\r\n        <div id= \"rev-title2\"><img src={star} className=\"starImg\" />{review.star}</div>\r\n      </div>\r\n    </li>    \r\n  );\r\n\r\n  function loadReviewPicture(code) {\r\n    var url = `https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/reviews/houseid/${code}/onlyPicture`\r\n    axios.get(url).then(({data}) => { \r\n      setPicture(data.reviews.map(pictureSource))  \r\n    })\r\n  }\r\n\r\n  const pictureSource = (review) => (\r\n    <div>\r\n    <img src={review.picture} id=\"reviewImg\"></img>\r\n    </div>\r\n  );\r\n\r\n \r\n\r\n \r\n\r\n  function makeCarousel(){\r\n      const settings = {\r\n        dots: false,\r\n        infinite: true,\r\n        speed: 150,\r\n        autoplay:true,\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1\r\n      };\r\n      return (\r\n          <Slider {...settings}>\r\n            {pictureSrc}\r\n          </Slider>\r\n      );\r\n\r\n  }\r\n\r\n  return (\r\n    <div className=\"side-bar-wrap\">\r\n      {\r\n          isLoading ?\r\n          <div className=\"side-bar\" id=\"sideBar\" style ={{display : \"none\"}}>\r\n            <div class = \"loading-wrap\">\r\n              <Spinner style={{ width: '3rem', height: '3rem' }} color=\"primary\" />\r\n            </div>\r\n          </div>\r\n          :\r\n            <div className=\"side-bar\" id=\"sideBar\" style ={{display : \"none\"}}>\r\n                \r\n                <div className = \"beforeContent\">\r\n                <img alt=\"sidebar hide\" src = {undo} id=\"sidebarHide\" onClick ={() => {props.toggle()}}\r\n                className=\"toggle-menu\"\r\n                />\r\n                \r\n                {\r\n                        isLike\r\n                        ?\r\n                        <img id = \"tmp\" alt='like' src={like2} className=\"likeImage\" onClick={() => changeImage()}/>\r\n                        :\r\n                        <img id = \"tmp\" alt='like' src={like1} className=\"likeImage\" onClick={() => changeImage()}/>\r\n                  }\r\n\r\n                </div>\r\n                                                                    \r\n              <div className=\"content\">\r\n                <div className = \"imageSection\">\r\n                 {\r\n                   pictureSrc != null\r\n                   ?\r\n                   makeCarousel()\r\n                   :\r\n                   <div></div>\r\n                 }\r\n                </div>\r\n\r\n                <div id = \"houseInfoSection1\">\r\n                  <table className =\"houseInfoTable1\">\r\n                    <tr> \r\n                      <td class = \"houseName\" colSpan=\"2\">{props.houseDetail.danjiName}</td>\r\n                    </tr>\r\n                    <tr>\r\n                      <td className =\"houseAddress\">{props.houseDetail.address}</td>\r\n                    </tr>\r\n                  </table>\r\n                </div>\r\n\r\n                <div id = \"houseInfoSection2\">\r\n                      <div class = \"test2\">주택정보</div>\r\n                          <div class =\"typeGroup\">\r\n                          {typeButton(props.houseDetail.houseDetailInfo)}\r\n                          </div>\r\n                          <table class=\"houseInfoTable2\">\r\n                          <tr>\r\n                              <td id=\"td1\">주택형</td>\r\n                              <td>{props.houseDetail.houseDetailInfo[typeIndex].typeName}</td>\r\n                            </tr>\r\n                          <tr>\r\n                              <td id = \"td1\">공급세대</td>\r\n                              <td>{props.houseDetail.houseHoldNum} 세대</td>\r\n                            </tr>\r\n                            <tr>\r\n                              <td id = \"td1\">준공일자</td>\r\n                              <td>\r\n                                <Moment format=\"YYYY / MM / DD\">{props.houseDetail.competeDate}</Moment>\r\n                              </td>\r\n                            </tr>\r\n                            <tr>\r\n                              <td id=\"td1\">임대 보증금</td>\r\n                              <td> {(props.houseDetail.houseDetailInfo[typeIndex].bassRentDeposit).substring(0,4)} 만원</td>\r\n                            </tr>\r\n                            <tr>\r\n                              <td id=\"td1\">월 임대료</td>\r\n                              <td>{(props.houseDetail.houseDetailInfo[typeIndex].bassMonthlyRentCharge).substring(0,2)} 만원</td>\r\n                            </tr>\r\n                            <tr>\r\n                              <td id=\"td1\">전환 보증금</td>\r\n                              <td>{numeral(props.houseDetail.houseDetailInfo[typeIndex].bassConversionDeposit).format('0,0')} 만원</td>\r\n\r\n                            </tr>\r\n                            <tr>\r\n                              <td id=\"td1\">공공 공용면적</td>\r\n                              <td>{props.houseDetail.houseDetailInfo[typeIndex].suplyCommuseArea} (㎡)</td>\r\n                            </tr>\r\n                            <tr>\r\n                              <td id=\"td1\"> 개인 공용면적</td>\r\n                              <td>{props.houseDetail.houseDetailInfo[typeIndex].suplyPrivateArea} (㎡)</td>\r\n                            </tr>\r\n                          </table>\r\n                          \r\n                          <HappyChart danjiName = {props.houseDetail.danjiName} convenience = {props.houseDetail.convenience} safety = {props.houseDetail.safety} medical = {props.houseDetail.medical}/>\r\n                        </div>\r\n                    </div>\r\n                      \r\n                      <div id = \"houseInfoSection4\">\r\n                        <div class = \"test2\">거주후기\r\n                          <button id = \"moreReview\" onClick = {()=>{localStorage.setItem(\"danjiCode\",props.houseDetail.danjiCode); window.location.href ='/reviews/create'}}>거주후기 작성</button>\r\n                          <button id = \"moreReview\" onClick = {()=>{localStorage.setItem(\"danjiCode\",props.houseDetail.danjiCode); window.location.href ='/reviews'}}>더보기</button>\r\n                      </div>\r\n                      \r\n                      \r\n                      <div>\r\n                        <ul class = \"rt\">\r\n                        {lastThreeReview}\r\n                        </ul>\r\n                      </div>\r\n                      \r\n                           \r\n                        \r\n                        \r\n                                          \r\n                        </div>\r\n                      </div>\r\n                \r\n          }\r\n        </div>\r\n  );\r\n};\r\n\r\nexport default React.memo(SideBar);"]},"metadata":{},"sourceType":"module"}