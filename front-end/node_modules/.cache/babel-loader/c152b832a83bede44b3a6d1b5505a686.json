{"ast":null,"code":"import _slicedToArray from\"C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';//https://github.com/imtaekh/my_app/blob/4485452eee5a48e94d2ee0b7892ef0181ba4302c/models/User.js\nimport $ from'jquery';import{Button,Col,Container,Form,FormGroup,Input,InputGroup,InputGroupAddon,InputGroupText,Modal,ModalHeader,Row,Table}from'reactstrap';import axios from'axios';import'./css/community.css';import Moment from'react-moment';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ReplyCommunity(props){var _useState=useState(\"0\"),_useState2=_slicedToArray(_useState,2),modalInput=_useState2[0],setModalInput=_useState2[1];var _useState3=useState(\"0\"),_useState4=_slicedToArray(_useState3,2),modalInputReply=_useState4[0],setModalInputReply=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),_id=_useState6[0],set_id=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),userId=_useState8[0],setUserId=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),writeDate=_useState10[0],setWriteDate=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),title=_useState12[0],setTitle=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),content=_useState14[0],setContent=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),reply=_useState16[0],setReply=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),activityHistoryList=_useState18[0],setActivityHistoryList=_useState18[1];var handleChangeUserId=function handleChangeUserId(e){e.preventDefault();setUserId(e.target.value);};var handleChangeWriteDate=function handleChangeWriteDate(e){e.preventDefault();setWriteDate(e.target.value);};var handleChangeTitle=function handleChangeTitle(e){e.preventDefault();setTitle(e.target.value);};var handleChangeReply=function handleChangeReply(e){e.preventDefault();setReply(e.target.value);};var replyList=function replyList(community){return/*#__PURE__*/_jsxs(\"li\",{class:\"article\",id:community._id,children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cf-fpi.everytime.kr/0.png\",class:\"picture-medium\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"profile\",children:[/*#__PURE__*/_jsx(\"h3\",{class:\"user\",children:community.userId}),/*#__PURE__*/_jsxs(\"ul\",{class:\"status\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"id\",children:community._id}),/*#__PURE__*/_jsx(\"li\",{className:\"deleteReply\",children:\"\\uC0AD\\uC81C\"})]})]}),/*#__PURE__*/_jsx(\"p\",{class:\"reply\",children:community.content}),/*#__PURE__*/_jsx(\"time\",{class:\"time\",children:/*#__PURE__*/_jsx(Moment,{format:\"YY.MM.DD\",children:community.writeDate})}),/*#__PURE__*/_jsx(\"br\",{})]},community._id);};var handReply=function handReply(){//댓글등록\nvar newDate=new Date();var form={title:\"[댓글]\",content:reply,userId:localStorage.getItem(\"userID\"),groupId:localStorage.getItem(\"groupId\"),replyOrder:0,replyStep:1,writeDate:newDate,numberOfView:0};console.log(form);axios.post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/create',form).then(function(res){console.log(res);alert(\"댓글 작성 완료\");window.location.reload();}).catch(function(error){console.log(error);});};var readCommunity=function readCommunity(){//게시글 정보\nvar form={_id:localStorage.getItem(\"community_id\")};axios.post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/detail',form).then(function(res){console.log(res.data);console.log(res.data.communitys.userId);set_id(res.data.communitys._id);setUserId(res.data.communitys.userId);setWriteDate(res.data.communitys.writeDate);setTitle(res.data.communitys.title);setContent(res.data.communitys.content);}).catch(function(error){console.log(error);});};var readReply=function readReply(){//댓글 목록 조회\nvar form={groupId:localStorage.getItem(\"groupId\")};axios.post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/reply',form).then(function(_ref){var data=_ref.data;data=data.communitysList;setActivityHistoryList(data.map(replyList));}).catch(function(error){console.log(error);});};var deleteCommunity=function deleteCommunity(){//게시글 삭제\nvar form={_id:localStorage.getItem(\"community_id\"),userId:localStorage.getItem(\"userID\"),writeId:userId};axios.post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/delete',form).then(function(res){alert(res.data);window.location.reload();window.location.href='/communities';}).catch(function(error){});};var deleteReply=function deleteReply(){//댓글 삭제\nvar form={_id:modalInput};axios.post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/delete',form).then(function(res){// alert(\"댓글 삭제 완료\");\nwindow.location.href='/communities/reply';});};var readCommunityDetail=function readCommunityDetail(){//게시글 수정\nvar writeId=userId;if(writeId==localStorage.getItem(\"userID\")){window.location.href='/communities/detail';}else{alert(\"수정 권한이 없습니다.\");window.location.reload();window.location.href='/communities';}};useEffect(function(){readCommunity();//게시글 상세조회\nreadReply();//댓글 목록 조회\n},[]);$(function(){$(\".deleteReply\").on(\"click\",function(){//댓글 삭제\nvar Button=$(this);var ul=Button.parent();var td=ul.children();setModalInput(td.eq(0).text());console.log(modalInput);if(modalInput!=0){deleteReply();}});});return/*#__PURE__*/_jsxs(\"div\",{className:\"dv\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"createCommunity\",children:/*#__PURE__*/_jsx(\"div\",{className:\"community-title\",children:/*#__PURE__*/_jsx(\"div\",{id:\"title\",children:\"\\uCEE4\\uBBA4\\uB2C8\\uD2F0\"})})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{class:\"community-block\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"https://cf-fpi.everytime.kr/0.png\",class:\"picture-medium\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"profile\",children:[/*#__PURE__*/_jsx(\"h3\",{class:\"user\",children:userId}),/*#__PURE__*/_jsx(Moment,{format:\"\\uC791\\uC131\\uC77C : YYYY.MM.DD\",className:\"writeDate\",children:writeDate}),/*#__PURE__*/_jsxs(\"ul\",{class:\"status\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"id\",children:_id}),/*#__PURE__*/_jsx(\"li\",{onClick:deleteCommunity,children:\"\\uC0AD\\uC81C\"})]}),/*#__PURE__*/_jsxs(\"ul\",{class:\"status\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"id\",children:_id}),/*#__PURE__*/_jsx(\"li\",{onClick:readCommunityDetail,children:\"\\uC218\\uC815\"})]})]}),/*#__PURE__*/_jsx(\"td\",{id:\"header\",children:/*#__PURE__*/_jsx(\"h4\",{children:title})}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{class:\"community-content\",children:/*#__PURE__*/_jsx(\"td\",{name:\"content\",type:\"textarea\",Rows:\"7\",children:content})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:/*#__PURE__*/_jsx(\"button\",{id:\"review-upload\",onClick:function onClick(){window.location.href='/communities';},style:{float:'left'},children:\"\\uAE00\\uBAA9\\uB85D\"})}),/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"br\",{}),activityHistoryList,/*#__PURE__*/_jsxs(InputGroup,{style:{marginTop:\"1%\",marginBottom:\"1%\"},children:[/*#__PURE__*/_jsx(Input,{name:\"reply\",id:\"reply\",placeholder:\"\\uB313\\uAE00\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\",onChange:handleChangeReply}),/*#__PURE__*/_jsx(InputGroupAddon,{addonType:\"append\",children:/*#__PURE__*/_jsx(Button,{color:\"primary\",onClick:function onClick(){return handReply();},children:\"\\uB4F1\\uB85D\"})})]})]});}export default ReplyCommunity;","map":{"version":3,"sources":["C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/src/source/ReplyCommunity.js"],"names":["React","useEffect","useState","$","Button","Col","Container","Form","FormGroup","Input","InputGroup","InputGroupAddon","InputGroupText","Modal","ModalHeader","Row","Table","axios","Moment","ReplyCommunity","props","modalInput","setModalInput","modalInputReply","setModalInputReply","_id","set_id","userId","setUserId","writeDate","setWriteDate","title","setTitle","content","setContent","reply","setReply","activityHistoryList","setActivityHistoryList","handleChangeUserId","e","preventDefault","target","value","handleChangeWriteDate","handleChangeTitle","handleChangeReply","replyList","community","handReply","newDate","Date","form","localStorage","getItem","groupId","replyOrder","replyStep","numberOfView","console","log","post","then","res","alert","window","location","reload","catch","error","readCommunity","data","communitys","readReply","communitysList","map","deleteCommunity","writeId","href","deleteReply","readCommunityDetail","on","ul","parent","td","children","eq","text","float","marginTop","marginBottom"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react'; //https://github.com/imtaekh/my_app/blob/4485452eee5a48e94d2ee0b7892ef0181ba4302c/models/User.js\r\nimport $ from 'jquery';\r\nimport {\r\n    Button,\r\n    Col,\r\n    Container,\r\n    Form,\r\n    FormGroup,\r\n    Input,\r\n    InputGroup,\r\n    InputGroupAddon,\r\n    InputGroupText,\r\n    Modal,\r\n    ModalHeader,\r\n    Row,\r\n    Table\r\n} from 'reactstrap';\r\nimport axios from 'axios';\r\nimport './css/community.css'\r\nimport Moment from 'react-moment'\r\n\r\nfunction ReplyCommunity(props) {\r\n    const [modalInput, setModalInput] = useState(\"0\");\r\n    const [modalInputReply, setModalInputReply] = useState(\"0\");\r\n    const [_id, set_id] = useState();\r\n    const [userId, setUserId] = useState();\r\n    const [writeDate, setWriteDate] = useState();\r\n    const [title, setTitle] = useState();\r\n    const [content, setContent] = useState();\r\n    const [reply, setReply] = useState();\r\n\r\n    const [activityHistoryList, setActivityHistoryList] = useState();\r\n\r\n    const handleChangeUserId = (e) => {\r\n        e.preventDefault();\r\n        setUserId(e.target.value);\r\n    }\r\n    const handleChangeWriteDate = (e) => {\r\n        e.preventDefault();\r\n        setWriteDate(e.target.value);\r\n    }\r\n    const handleChangeTitle = (e) => {\r\n        e.preventDefault();\r\n        setTitle(e.target.value);\r\n    }\r\n    const handleChangeReply = (e) => {\r\n        e.preventDefault();\r\n        setReply(e.target.value);\r\n    }\r\n\r\n\r\nconst replyList = (community) => (\r\n\r\n    <li class=\"article\" key={community._id} id={community._id}>\r\n        <img src=\"https://cf-fpi.everytime.kr/0.png\" class=\"picture-medium\"></img>\r\n        <div class=\"profile\">\r\n            <h3 class=\"user\">{community.userId}</h3>\r\n\r\n            <ul class=\"status\">\r\n                <td className=\"id\">{community._id}</td>\r\n\r\n                <li className={\"deleteReply\"}>삭제</li>\r\n            </ul>\r\n\r\n        </div>\r\n\r\n        <p class=\"reply\">\r\n            {community.content}</p>\r\n        <time class=\"time\">\r\n            <Moment format=\"YY.MM.DD\">{community.writeDate}</Moment>\r\n        </time>\r\n        <br></br>\r\n\r\n    </li>\r\n);\r\nconst handReply = () => { //댓글등록\r\n    let newDate = new Date();\r\n    var form = {\r\n        title: \"[댓글]\",\r\n        content: reply,\r\n        userId: localStorage.getItem(\"userID\"),\r\n        groupId: localStorage.getItem(\"groupId\"),\r\n        replyOrder: 0,\r\n        replyStep: 1,\r\n        writeDate: newDate,\r\n        numberOfView: 0\r\n    };\r\n    console.log(form);\r\n    axios\r\n        .post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/create', form)\r\n        .then((res) => {\r\n            console.log(res)\r\n            alert(\"댓글 작성 완료\")\r\n            window\r\n                .location\r\n                .reload();\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error)\r\n\r\n        })\r\n    }\r\n\r\nconst readCommunity = () => { //게시글 정보\r\n\r\n    var form = {\r\n        _id: localStorage.getItem(\"community_id\")\r\n    };\r\n    axios\r\n        .post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/detail', form)\r\n        .then((res) => {\r\n\r\n            console.log(res.data);\r\n            console.log(res.data.communitys.userId);\r\n            set_id(res.data.communitys._id);\r\n            setUserId(res.data.communitys.userId);\r\n            setWriteDate(res.data.communitys.writeDate);\r\n            setTitle(res.data.communitys.title);\r\n            setContent(res.data.communitys.content);\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        })\r\n    }\r\n\r\nconst readReply = () => { //댓글 목록 조회\r\n\r\n    var form = {\r\n        groupId: localStorage.getItem(\"groupId\")\r\n    };\r\n    axios\r\n        .post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/reply', form)\r\n        .then(({data}) => {\r\n            data = data.communitysList\r\n            setActivityHistoryList(data.map(replyList))\r\n\r\n        })\r\n        .catch(function (error) {\r\n            console.log(error);\r\n        })\r\n    }\r\n    const deleteCommunity = () => { //게시글 삭제\r\n        var form = {\r\n            _id: localStorage.getItem(\"community_id\"),\r\n            userId: localStorage.getItem(\"userID\"),\r\n            writeId: userId\r\n        };\r\n        axios\r\n            .post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/delete', form)\r\n            .then((res) => {\r\n                alert(res.data);\r\n                window.location.reload();\r\n                window.location.href = '/communities'\r\n               \r\n            }).catch(function (error){\r\n      \r\n            })\r\n    }\r\nconst deleteReply = () => { //댓글 삭제\r\n    var form = {\r\n        _id: modalInput\r\n    };\r\n    axios\r\n        .post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/delete', form)\r\n        .then((res) => {\r\n            // alert(\"댓글 삭제 완료\");\r\n            window.location.href = '/communities/reply'\r\n        })\r\n}\r\nconst readCommunityDetail = () => { //게시글 수정\r\n    var writeId =userId;\r\n\r\n    if(writeId == localStorage.getItem(\"userID\")){\r\n        window.location.href ='/communities/detail'\r\n    }else{\r\n        alert(\"수정 권한이 없습니다.\")\r\n        window.location.reload();\r\n        window.location.href = '/communities'\r\n    }\r\n  \r\n}\r\nuseEffect(() => {\r\n\r\n    readCommunity(); //게시글 상세조회\r\n    readReply(); //댓글 목록 조회\r\n}, [])\r\n\r\n    $(function () {\r\n       \r\n        $(\".deleteReply\").on(\"click\", function () {  //댓글 삭제\r\n\r\n            var Button = $(this);\r\n\r\n            var ul = Button.parent();\r\n            var td = ul.children();\r\n            setModalInput(td.eq(0).text());\r\n           console.log(modalInput);\r\n           if(modalInput !=0){\r\n               deleteReply();\r\n           }\r\n        })     \r\n         \r\n    })\r\n\r\n\r\n    return (\r\n       \r\n        <div className=\"dv\">\r\n    \r\n  <div className=\"createCommunity\">\r\n                <div className=\"community-title\">\r\n                    <div id=\"title\">커뮤니티</div>\r\n                </div>\r\n                \r\n            </div>\r\n            <br></br>\r\n                <div class=\"community-block\">\r\n                    \r\n                <img src=\"https://cf-fpi.everytime.kr/0.png\" class=\"picture-medium\"></img>\r\n                <div class=\"profile\">\r\n                    <h3 class=\"user\">{userId}</h3>\r\n                    <Moment format=\"작성일 : YYYY.MM.DD\" className =\"writeDate\">{writeDate}</Moment>\r\n                    \r\n                    <ul class=\"status\">\r\n                        <td className=\"id\">{_id}</td>            \r\n                        <li onClick={deleteCommunity}>삭제</li>\r\n                    </ul>\r\n                    <ul class=\"status\">\r\n                        <td className=\"id\">{_id}</td>            \r\n                        <li onClick={readCommunityDetail}>수정</li>\r\n                    </ul>\r\n                </div>\r\n\r\n                    <td id=\"header\">\r\n                        <h4>\r\n                            {title}\r\n                        </h4>\r\n                      \r\n                    </td>\r\n                    <div>\r\n                </div>\r\n                     <div class=\"community-content\">\r\n                        <td\r\n                            name=\"content\"\r\n                            type=\"textarea\"\r\n                            Rows=\"7\"\r\n                            >{content}</td>\r\n                    </div>  \r\n                    <br></br>\r\n                   <div className=\"button-container\">\r\n                  <button id=\"review-upload\" onClick = {()=>{window.location.href ='/communities'}} style={{float: 'left'}}>글목록</button>\r\n                </div> \r\n                    \r\n                    <br></br>\r\n                 </div> \r\n              \r\n                <br>\r\n                </br>\r\n                \r\n                 {activityHistoryList}\r\n                    <InputGroup\r\n                        style={{\r\n                            marginTop: \"1%\",\r\n                            marginBottom: \"1%\"\r\n                        }}>\r\n                     <Input name=\"reply\" id=\"reply\" placeholder=\"댓글을 입력하세요\" onChange={handleChangeReply}></Input>\r\n                     <InputGroupAddon addonType=\"append\">\r\n                    <Button color=\"primary\" onClick = {()=> handReply()}>등록</Button>\r\n                      </InputGroupAddon>\r\n                    </InputGroup>\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default ReplyCommunity;\r\n"]},"metadata":{},"sourceType":"module"}