{"ast":null,"code":"import _slicedToArray from\"C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import $ from'jquery';import{Button,Col,Container,Form,FormGroup,Input,InputGroup,Progress,InputGroupAddon,InputGroupText,Modal,ModalHeader,Row,Table}from'reactstrap';import axios from'axios';import'./Review.css';import room1 from'../Image/room1.PNG';import Moment from'react-moment';import numeral from'numeral';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ReadReview(props){var _useState=useState(props._id),_useState2=_slicedToArray(_useState,2),_id=_useState2[0],set_id=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),userId=_useState4[0],setUserId=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),title=_useState6[0],setTitle=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),monthlyRentCharge=_useState8[0],setMonthlyRentCharge=_useState8[1];var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),adminCharge=_useState10[0],setAdminCharge=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),region=_useState12[0],setRegion=_useState12[1];var _useState13=useState(),_useState14=_slicedToArray(_useState13,2),typeName=_useState14[0],setTypeName=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),merit=_useState16[0],setMerit=_useState16[1];var _useState17=useState(),_useState18=_slicedToArray(_useState17,2),demerit=_useState18[0],setDemerit=_useState18[1];var _useState19=useState(''),_useState20=_slicedToArray(_useState19,2),picture=_useState20[0],setPicture=_useState20[1];var _useState21=useState(''),_useState22=_slicedToArray(_useState21,2),imagePreviewUrl=_useState22[0],setImagePreviewUrl=_useState22[1];var _useState23=useState(),_useState24=_slicedToArray(_useState23,2),star=_useState24[0],setStar=_useState24[1];var _useState25=useState(),_useState26=_slicedToArray(_useState25,2),writeDate=_useState26[0],setWriteDate=_useState26[1];var _useState27=useState(\"default\"),_useState28=_slicedToArray(_useState27,2),modalInput=_useState28[0],setModalInput=_useState28[1];var _useState29=useState(),_useState30=_slicedToArray(_useState29,2),tableData=_useState30[0],setTableData=_useState30[1];//댓글 목록 조회\nvar _useState31=useState(true),_useState32=_slicedToArray(_useState31,2),isReadOnly=_useState32[0],setIsReadOnly=_useState32[1];//댓글 수정활성화\nvar handleChangeTitle=function handleChangeTitle(e){e.preventDefault();setTitle(e.target.value);};var handleChangeMonthlyRentCharge=function handleChangeMonthlyRentCharge(e){e.preventDefault();setMonthlyRentCharge(e.target.value);};var handleChangeAdminCharge=function handleChangeAdminCharge(e){e.preventDefault();setAdminCharge(e.target.value);};var handleChangeRegion=function handleChangeRegion(e){e.preventDefault();setRegion(e.target.value);};var handleChangeTypeName=function handleChangeTypeName(e){e.preventDefault();setTypeName(e.target.value);};var handlChangeMerit=function handlChangeMerit(e){e.preventDefault();setMerit(e.target.value);};var handleChangeDemerit=function handleChangeDemerit(e){e.preventDefault();setDemerit(e.target.value);};var handleChangePicture=function handleChangePicture(e){e.preventDefault();var reader=new FileReader();var file=e.target.files[0];reader.onloadend=function(){setPicture(file);setImagePreviewUrl(reader.result);};reader.readAsDataURL(file);};var handlChangeStar=function handlChangeStar(e){e.preventDefault();setStar(e.target.value);};// const toggleIsReadOnly = () => {\n//     setIsReadOnly(!isReadOnly);\n// }\nvar readReview=function readReview(){var form={_id:localStorage.getItem(\"review_id\")//거주후기 id\n};axios.post('/happyhouse/reviews/detail',form).then(function(res){console.log(res.data);setUserId(res.data.reviews.userId);setTitle(res.data.reviews.title);setMonthlyRentCharge(res.data.reviews.monthlyRentCharge);setAdminCharge(res.data.reviews.adminCharge);setRegion(res.data.reviews.region);setTypeName(res.data.reviews.typeName);setMerit(res.data.reviews.merit);setDemerit(res.data.reviews.demerit);setPicture(res.data.reviews.picture);setStar(res.data.reviews.star);setWriteDate(res.data.reviews.writeDate);}).catch(function(error){console.log(error);});};useEffect(function(){readReview();},[]);var updateReview=function updateReview(){// let newDate = new Date();\nvar form={houseId:\"6063083edb67cc10cce15fc0\",userId:localStorage.getItem(\"userID\"),_id:localStorage.getItem(\"review_id\"),title:title,region:region,typeName:typeName,monthlyRentCharge:monthlyRentCharge,adminCharge:adminCharge,merit:merit,demerit:demerit,picture:picture,star:star// writeDate: newDate     \n};axios.post('/happyhouse/reviews/update',form).then(function(res){alert(\"거주후기 수정 완료\");window.location.href='/reviews';});};var deleteReview=function deleteReview(){var form={_id:localStorage.getItem(\"review_id\")};axios.post('/happyhouse/reviews/delete',form).then(function(res){alert(\"거주후기 삭제 완료\");window.location.href='/reviews';});};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"review-wrap\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"review-title\",children:/*#__PURE__*/_jsx(\"div\",{id:\"title\",children:\"\\uAC70\\uC8FC \\uD6C4\\uAE30\"})}),/*#__PURE__*/_jsx(\"div\",{class:\"review-container\",children:/*#__PURE__*/_jsxs(\"div\",{class:\"review-block\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"header\",children:/*#__PURE__*/_jsx(\"h4\",{children:/*#__PURE__*/_jsx(Input,{name:\"title\",onChange:handleChangeTitle,value:title})})}),/*#__PURE__*/_jsxs(\"div\",{id:\"writer-writeDate-star\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[userId,\"/\",/*#__PURE__*/_jsx(Moment,{format:\"YY.MM.DD\",children:writeDate}),/*#__PURE__*/_jsx(Progress,{value:star,max:\"5\"}),\"\\uD3C9\\uC810(0~5)\"]}),/*#__PURE__*/_jsx(Input,{placeholder:\"\\uD3C9\\uC810(0~5)\",name:\"star\",onChange:handlChangeStar,value:star})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{class:\"houseInfo\",children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:\"\\uC9C0\\uC5ED\"}),/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:/*#__PURE__*/_jsx(Input,{name:\"content\",onChange:handleChangeRegion,value:region})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:\"\\uC784\\uB300\\uC885\\uB958\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Input,{value:\"\\uD589\\uBCF5\\uC8FC\\uD0DD\",readOnly:isReadOnly})}),/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:\"\\uC720\\uD615\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Input,{value:\"\\uC544\\uD30C\\uD2B8\",readOnly:isReadOnly})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:\"\\uC8FC\\uD0DD\\uD615\"}),/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:/*#__PURE__*/_jsx(Input,{name:\"content\",onChange:handleChangeTypeName,value:typeName})}),/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:\"\\uACF5\\uAE09\\uC218\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Input,{value:\"32 \\uC138\\uB300\",readOnly:isReadOnly})})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:\"\\uC6D4\\uC138\"}),/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:/*#__PURE__*/_jsx(Input,{name:\"monthlyRentCharge\",onChange:handleChangeMonthlyRentCharge,value:numeral(monthlyRentCharge).format('0,0')})}),/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:\"\\uAD00\\uB9AC\\uBE44\"}),/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:/*#__PURE__*/_jsx(Input,{name:\"adminCharge\",onChange:handleChangeAdminCharge,value:numeral(adminCharge).format('0,0')})})]})]})}),/*#__PURE__*/_jsx(\"div\",{class:\"review-image\",children:/*#__PURE__*/_jsx(\"img\",{src:room1,id:\"reviewImage\"})}),/*#__PURE__*/_jsxs(\"div\",{class:\"review-content\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"merit\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"b\",children:\"\\uC7A5\\uC810\"}),/*#__PURE__*/_jsx(Input,{name:\"merit\",cols:\"50\",rows:\"20\",onChange:handlChangeMerit,value:merit})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"demerit\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"b\",children:\"\\uB2E8\\uC810\"}),/*#__PURE__*/_jsx(Input,{className:\"input-style\",name:\"demerit\",cols:\"50\",rows:\"20\",onChange:handleChangeDemerit,value:demerit})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"button-container\",children:[/*#__PURE__*/_jsx(\"button\",{id:\"review-upload\",onClick:updateReview,children:\"\\uC218\\uC815\"}),/*#__PURE__*/_jsx(\"button\",{id:\"review-upload\",onClick:deleteReview,children:\"\\uC0AD\\uC81C\"}),/*#__PURE__*/_jsx(\"button\",{id:\"review-upload\",onClick:function onClick(){window.location.href='/reviews';},style:{float:'left'},children:\"\\uCDE8\\uC18C\"})]})]})})]})})});}export default ReadReview;","map":{"version":3,"sources":["C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/src/source/ReadReview.js"],"names":["React","useEffect","useState","$","Button","Col","Container","Form","FormGroup","Input","InputGroup","Progress","InputGroupAddon","InputGroupText","Modal","ModalHeader","Row","Table","axios","room1","Moment","numeral","ReadReview","props","_id","set_id","userId","setUserId","title","setTitle","monthlyRentCharge","setMonthlyRentCharge","adminCharge","setAdminCharge","region","setRegion","typeName","setTypeName","merit","setMerit","demerit","setDemerit","picture","setPicture","imagePreviewUrl","setImagePreviewUrl","star","setStar","writeDate","setWriteDate","modalInput","setModalInput","tableData","setTableData","isReadOnly","setIsReadOnly","handleChangeTitle","e","preventDefault","target","value","handleChangeMonthlyRentCharge","handleChangeAdminCharge","handleChangeRegion","handleChangeTypeName","handlChangeMerit","handleChangeDemerit","handleChangePicture","reader","FileReader","file","files","onloadend","result","readAsDataURL","handlChangeStar","readReview","form","localStorage","getItem","post","then","res","console","log","data","reviews","catch","error","updateReview","houseId","alert","window","location","href","deleteReview","format","float"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport $ from 'jquery';\r\nimport {\r\n    Button,\r\n    Col,\r\n    Container,\r\n    Form,\r\n    FormGroup,\r\n    Input,\r\n    InputGroup,\r\n    Progress,\r\n    InputGroupAddon,\r\n    InputGroupText,\r\n    Modal,\r\n    ModalHeader,\r\n    Row,\r\n    Table\r\n} from 'reactstrap';\r\nimport axios from 'axios';\r\nimport './Review.css'\r\nimport room1 from '../Image/room1.PNG'\r\nimport Moment from 'react-moment'\r\nimport numeral from 'numeral'\r\nfunction ReadReview(props) {\r\n    const [_id, set_id] = useState(props._id);\r\n    const [userId, setUserId] = useState();\r\n    const [title, setTitle] = useState()\r\n    const [monthlyRentCharge, setMonthlyRentCharge] = useState()\r\n    const [adminCharge, setAdminCharge] = useState()\r\n    const [region, setRegion] = useState()\r\n    const [typeName, setTypeName] = useState()\r\n    const [merit, setMerit] = useState()\r\n    const [demerit, setDemerit] = useState()\r\n    const [picture, setPicture] = useState('')\r\n    const [imagePreviewUrl, setImagePreviewUrl] = useState('');\r\n    const [star, setStar] = useState()\r\n    const [writeDate, setWriteDate] = useState()\r\n\r\n    const [modalInput, setModalInput] = useState(\"default\");\r\n    const [tableData, setTableData] = useState(); //댓글 목록 조회\r\n    const [isReadOnly, setIsReadOnly] = useState(true); //댓글 수정활성화\r\n   \r\n    const handleChangeTitle = (e) => {\r\n        e.preventDefault();\r\n        setTitle(e.target.value);\r\n    };\r\n    const handleChangeMonthlyRentCharge = (e) => {\r\n        e.preventDefault();\r\n        setMonthlyRentCharge(e.target.value);\r\n    };\r\n    const handleChangeAdminCharge = (e) => {\r\n        e.preventDefault();\r\n        setAdminCharge(e.target.value);\r\n    };\r\n    const handleChangeRegion = (e) => {\r\n        e.preventDefault();\r\n        setRegion(e.target.value);\r\n    };\r\n    const handleChangeTypeName = (e) => {\r\n        e.preventDefault();\r\n        setTypeName(e.target.value);\r\n    };\r\n    const handlChangeMerit = (e) => {\r\n        e.preventDefault();\r\n        setMerit(e.target.value);\r\n    };\r\n    const handleChangeDemerit = (e) => {\r\n        e.preventDefault();\r\n        setDemerit(e.target.value);\r\n    };\r\n    const handleChangePicture = (e) => {\r\n        e.preventDefault();\r\n\r\n        let reader = new FileReader();\r\n        let file = e\r\n            .target\r\n            .files[0];\r\n        reader.onloadend = () => {\r\n            setPicture(file);\r\n            setImagePreviewUrl(reader.result);\r\n        }\r\n        reader.readAsDataURL(file);\r\n    }\r\n    const handlChangeStar = (e) => {\r\n        e.preventDefault();\r\n        setStar(e.target.value);\r\n    };\r\n   \r\n    // const toggleIsReadOnly = () => {\r\n    //     setIsReadOnly(!isReadOnly);\r\n    // }\r\n\r\n    const readReview = () => {\r\n\r\n        var form = {\r\n            _id: localStorage.getItem(\"review_id\") //거주후기 id\r\n        };\r\n        axios\r\n            .post('/happyhouse/reviews/detail', form)\r\n            .then((res) => {\r\n\r\n                console.log(res.data);\r\n                setUserId(res.data.reviews.userId);\r\n                setTitle(res.data.reviews.title);\r\n                setMonthlyRentCharge(res.data.reviews.monthlyRentCharge);\r\n                setAdminCharge(res.data.reviews.adminCharge);\r\n                setRegion(res.data.reviews.region);\r\n                setTypeName(res.data.reviews.typeName);\r\n                setMerit(res.data.reviews.merit);\r\n                setDemerit(res.data.reviews.demerit);\r\n                setPicture(res.data.reviews.picture);\r\n                setStar(res.data.reviews.star);\r\n                setWriteDate(res.data.reviews.writeDate);\r\n            })\r\n            .catch(function (error) {\r\n                console.log(error);\r\n            })\r\n        }\r\n\r\n   \r\n  \r\n    useEffect(() => {\r\n        readReview(); \r\n    }, [])\r\n\r\n    const updateReview = () => {\r\n       // let newDate = new Date();\r\n       \r\n        var form={\r\n            houseId: \"6063083edb67cc10cce15fc0\",\r\n            userId : localStorage.getItem(\"userID\"),\r\n            _id : localStorage.getItem(\"review_id\"),\r\n            title : title, \r\n            region : region,\r\n            typeName : typeName,\r\n            monthlyRentCharge : monthlyRentCharge,\r\n            adminCharge : adminCharge,           \r\n            merit : merit,\r\n            demerit : demerit,\r\n            picture : picture, \r\n            star : star,  \r\n           // writeDate: newDate     \r\n        };\r\n\r\n        axios.post('/happyhouse/reviews/update', form).then((res) => {\r\n            alert(\"거주후기 수정 완료\")\r\n            window.location.href ='/reviews'\r\n        })\r\n    }\r\n    const deleteReview = () => {    \r\n         var form={\r\n             _id : localStorage.getItem(\"review_id\"),\r\n         };\r\n \r\n         axios.post('/happyhouse/reviews/delete', form).then((res) => {\r\n             alert(\"거주후기 삭제 완료\")\r\n             window.location.href ='/reviews'\r\n         })\r\n     }\r\n    return (\r\n        <div>\r\n            <React.Fragment>\r\n\r\n                <div className=\"review-wrap\">\r\n                    <div className=\"review-title\">\r\n                        <div id=\"title\">거주 후기</div>\r\n                    </div>\r\n\r\n                    \r\n                    <div class=\"review-container\">\r\n                        <div class=\"review-block\">\r\n                            <div id=\"header\">\r\n                                <h4>\r\n                                            <Input\r\n                                                name=\"title\"\r\n                                                onChange={handleChangeTitle}\r\n                                                value={title}\r\n                                            ></Input>\r\n                                        </h4>\r\n                            </div>\r\n                          \r\n                            <div id=\"writer-writeDate-star\">\r\n                                <div>{userId}\r\n                                    /\r\n                                    <Moment format=\"YY.MM.DD\">{writeDate}</Moment>\r\n                                        <Progress  value={star} max=\"5\" />평점(0~5)</div><Input placeholder=\"평점(0~5)\" name=\"star\" onChange={handlChangeStar} value={star}></Input>\r\n                                    \r\n                            </div>\r\n\r\n                            <div>\r\n                                <table class=\"houseInfo\">\r\n                                    <tr>\r\n                                        <td id=\"a\">지역</td>\r\n                                        <td id=\"a\">\r\n                                            <Input\r\n                                                name=\"content\"\r\n                                                onChange={handleChangeRegion}\r\n                                                value={region}\r\n                                            ></Input>\r\n                                        </td>\r\n\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td id=\"a\">임대종류</td>\r\n                                        <td>\r\n                                            <Input value=\"행복주택\" readOnly={isReadOnly}></Input>\r\n                                        </td>\r\n                                        <td id=\"a\">유형</td>\r\n                                        <td>\r\n                                            <Input value=\"아파트\" readOnly={isReadOnly}></Input>\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td id=\"a\">주택형</td>\r\n                                        <td id=\"a\">\r\n                                            <Input\r\n                                                name=\"content\"\r\n                                                onChange={handleChangeTypeName}\r\n                                                value={typeName}\r\n                                            ></Input>\r\n                                        </td>\r\n\r\n                                        <td id=\"a\">공급수</td>\r\n                                        <td>\r\n                                            <Input value=\"32 세대\" readOnly={isReadOnly}></Input>\r\n                                        </td>\r\n                                    </tr>\r\n                                    <tr>\r\n                                        <td id=\"a\">월세</td>\r\n                                        <td id=\"a\">\r\n                                            <Input\r\n                                                name=\"monthlyRentCharge\"\r\n                                                onChange={handleChangeMonthlyRentCharge}\r\n                                                value={numeral(monthlyRentCharge).format('0,0')}\r\n                                            ></Input>\r\n                                        </td>\r\n\r\n                                        <td id=\"a\">관리비</td>\r\n                                        <td id=\"a\">\r\n                                            <Input\r\n                                                name=\"adminCharge\"\r\n                                                onChange={handleChangeAdminCharge}\r\n                                                value={numeral(adminCharge).format('0,0')}\r\n                                            ></Input>\r\n                                        </td>\r\n\r\n                                    </tr>\r\n                                </table>\r\n                            </div>\r\n\r\n                            <div class=\"review-image\">\r\n                                <img src={room1} id=\"reviewImage\"></img>\r\n                                {/* <div>{reviews.picture}</div> */}\r\n                            </div>\r\n\r\n                            <div class=\"review-content\">\r\n                                <div id=\"merit\">\r\n                                    <div id=\"b\">장점</div>\r\n                                    <Input\r\n                                        name=\"merit\"\r\n                                        cols=\"50\"\r\n                                        rows=\"20\"\r\n                                        onChange={handlChangeMerit}\r\n                                        value={merit}\r\n                                        ></Input>\r\n\r\n                                </div>\r\n                                <div id=\"demerit\">\r\n                                    <div id=\"b\">단점</div>\r\n                                    <Input\r\n                                        className=\"input-style\"\r\n                                        name=\"demerit\"\r\n                                        cols=\"50\"\r\n                                        rows=\"20\"                                    \r\n                                        onChange={handleChangeDemerit}\r\n                                        value={demerit}\r\n                                        ></Input>\r\n                                </div>\r\n                            </div>\r\n                            <br></br>\r\n                            <div className=\"button-container\">\r\n        <button id=\"review-upload\" onClick={updateReview}>수정</button>\r\n        <button id=\"review-upload\" onClick={deleteReview}>삭제</button>\r\n        <button id=\"review-upload\" onClick = {()=>{window.location.href ='/reviews'}} style={{float: 'left'}}>취소</button>\r\n        </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </React.Fragment>\r\n        </div>\r\n\r\n    )\r\n}\r\nexport default ReadReview;\r\n"]},"metadata":{},"sourceType":"module"}