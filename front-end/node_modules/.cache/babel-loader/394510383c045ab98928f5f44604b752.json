{"ast":null,"code":"import _slicedToArray from\"C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import axios from'axios';import'./css/community.css';import $ from'jquery';import{Modal,ModalHeader}from'reactstrap';import CreateCommunity from'./CreateCommunity';import ReadCommunity from'./ReadCommunity';import Moment from'react-moment';import Pagination from'../source/Pagination';import{useMediaQuery}from\"react-responsive\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Communities=function Communities(props){var _useState=useState(\"0\"),_useState2=_slicedToArray(_useState,2),modalInput=_useState2[0],setModalInput=_useState2[1];var _useState3=useState(\"0\"),_useState4=_slicedToArray(_useState3,2),modalInputReply=_useState4[0],setModalInputReply=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),modalCreateCommunity=_useState6[0],setModalCreateCommunity=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),modalReadCommunity=_useState8[0],setModalReadCommunity=_useState8[1];var toggleCreateCommunity=function toggleCreateCommunity(){return setModalCreateCommunity(!modalCreateCommunity);};var toggleReadCommunity=function toggleReadCommunity(){return setModalReadCommunity(!modalReadCommunity);};var _useState9=useState(),_useState10=_slicedToArray(_useState9,2),activityHistoryList=_useState10[0],setActivityHistoryList=_useState10[1];var _useState11=useState(),_useState12=_slicedToArray(_useState11,2),activityHistoryListOfMobile=_useState12[0],setActivityHistoryListOfMobile=_useState12[1];var _useState13=useState(1),_useState14=_slicedToArray(_useState13,2),page=_useState14[0],setPage=_useState14[1];var _useState15=useState(),_useState16=_slicedToArray(_useState15,2),count=_useState16[0],setCount=_useState16[1];var _useState17=useState(3),_useState18=_slicedToArray(_useState17,2),pageSize=_useState18[0],setPageSize=_useState18[1];var handlePageChange=function handlePageChange(page){localStorage.setItem(\"page\",page);window.location.reload();};var communityList=function communityList(community){return/*#__PURE__*/_jsx(\"li\",{className:\"li\",id:community._id,children:/*#__PURE__*/_jsxs(\"div\",{class:\"community-block\",id:\"second\",onClick:true,children:[/*#__PURE__*/_jsx(\"td\",{className:\"id\",children:community._id}),/*#__PURE__*/_jsx(\"td\",{className:\"id\",children:community.writeDate}),/*#__PURE__*/_jsx(\"td\",{id:\"header\",className:\"readCommunity\",children:/*#__PURE__*/_jsxs(\"h4\",{children:[\"[\",community.title,\"]\"]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"table\",{class:\"houseInfo\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:\"\\uC791\\uC131\\uC790\"}),/*#__PURE__*/_jsx(\"td\",{children:community.userId}),/*#__PURE__*/_jsx(\"td\",{id:\"a\",children:\"\\uC791\\uC131\\uC77C\"}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Moment,{format:\"YY.MM.DD\",children:community.writeDate})})]})})}),/*#__PURE__*/_jsx(\"div\",{class:\"community-content\",children:community.content}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"button-container\",children:/*#__PURE__*/_jsx(\"button\",{id:\"review-upload\",className:\"readCommunityReply\",children:\"\\uB313\\uAE00\"})}),/*#__PURE__*/_jsx(\"br\",{})]})},community._id);};var communityListOfMobile=function communityListOfMobile(community){return/*#__PURE__*/_jsx(\"li\",{className:\"li\",id:community._id,children:/*#__PURE__*/_jsxs(\"div\",{class:\"community-block readCommunityReplyOnMobile\",id:\"second\",children:[/*#__PURE__*/_jsx(\"td\",{className:\"id\",children:community._id}),/*#__PURE__*/_jsx(\"td\",{className:\"id\",children:community.writeDate}),/*#__PURE__*/_jsx(\"img\",{src:\"https://cf-fpi.everytime.kr/0.png\",class:\"picture-medium\"}),/*#__PURE__*/_jsxs(\"div\",{class:\"profile\",children:[/*#__PURE__*/_jsx(\"h3\",{class:\"user\",children:community.userId}),/*#__PURE__*/_jsx(Moment,{format:\"\\uC791\\uC131\\uC77C : YYYY.MM.DD\",className:\"writeDate\",children:community.writeDate})]}),/*#__PURE__*/_jsx(\"td\",{id:\"header\",className:\"readCommunity\",children:/*#__PURE__*/_jsx(\"h4\",{className:\"header-title\",children:community.title})}),/*#__PURE__*/_jsx(\"div\",{class:\"community-content\",children:community.content})]})},community._id);};function readCommunityCount(){axios.get('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities').then(function(_ref){var data=_ref.data;setCount(data.count);});}function readActivityHistory(){var form={page:localStorage.getItem(\"page\")};axios.post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/page',form).then(function(_ref2){var data=_ref2.data;console.log(page);data=data.communitysList;setActivityHistoryList(data.map(communityList));setActivityHistoryListOfMobile(data.map(communityListOfMobile));});}$(function(){$(\".readCommunity\").off(\"click\");$(\".createCommunityButton\").on(\"click\",function(){var Button=$(this);var div=Button.parent();var td=div.children();setModalInput(td.eq(0).text());toggleCreateCommunity();});$(\".readCommunityDetail\").on(\"click\",function(){var Button=$(this);var div=Button.parent().parent();var td=div.children();setModalInput(td.eq(0).text());localStorage.setItem(\"community_id\",modalInput);localStorage.setItem(\"groupId\",modalInputReply);if(localStorage.getItem(\"community_id\")!=\"0\"){window.location.href='/communities/detail';}});$(\".readCommunityReply\").on(\"click\",function(){var Button=$(this);var div=Button.parent().parent();var td=div.children();setModalInput(td.eq(0).text());setModalInputReply(td.eq(1).text());localStorage.setItem(\"community_id\",modalInput);localStorage.setItem(\"groupId\",modalInputReply);if(localStorage.getItem(\"community_id\")!=\"0\"&&localStorage.getItem(\"groupId\")!=\"0\"){window.location.href='/communities/reply';}});$(\".readCommunityReplyOnMobile\").on(\"click\",function(){var li=$(this);var div=li.children();setModalInput(div.eq(0).text());setModalInputReply(div.eq(1).text());localStorage.setItem(\"community_id\",modalInput);localStorage.setItem(\"groupId\",modalInputReply);if(localStorage.getItem(\"community_id\")!=\"0\"&&localStorage.getItem(\"groupId\")!=\"0\"){window.location.href='/communities/reply';}});});useEffect(function(){readCommunityCount();readActivityHistory();//getlist\n},[]);var isPc=useMediaQuery({query:\"(min-width: 601px)\"});var isMobile=useMediaQuery({query:\"(max-width: 600px\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"dv\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"createCommunity\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"community-title\",children:/*#__PURE__*/_jsx(\"div\",{id:\"title\",children:\"\\uCEE4\\uBBA4\\uB2C8\\uD2F0\"})}),isPc&&/*#__PURE__*/_jsxs(\"div\",{className:\"search-button-group\",children:[/*#__PURE__*/_jsx(\"select\",{id:\"community-search-option\",children:/*#__PURE__*/_jsx(\"option\",{children:\"\\uC81C\\uBAA9\"})}),/*#__PURE__*/_jsx(\"button\",{id:\"community-upload\",className:\"createCommunityButton\",children:\"\\uAE00\\uC4F0\\uAE30\"})]}),isMobile&&/*#__PURE__*/_jsx(\"button\",{id:\"community-upload\",className:\"createCommunityButton\",children:\"\\uAE00\\uC4F0\\uAE30\"})]}),isPc&&activityHistoryList,isMobile&&activityHistoryListOfMobile,/*#__PURE__*/_jsx(\"div\",{id:\"center\",children:/*#__PURE__*/_jsx(\"div\",{class:\"pagination\",children:/*#__PURE__*/_jsx(Pagination,{itemsCount:count,pageSize:pageSize,currentPage:1,onPageChange:handlePageChange})})}),/*#__PURE__*/_jsxs(Modal,{isOpen:modalCreateCommunity,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggleCreateCommunity,children:\"\\uCEE4\\uBBA4\\uB2C8\\uD2F0\"}),/*#__PURE__*/_jsx(CreateCommunity,{})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:modalReadCommunity,children:[/*#__PURE__*/_jsx(ModalHeader,{toggle:toggleReadCommunity,children:\"\\uCEE4\\uBBA4\\uB2C8\\uD2F0\"}),/*#__PURE__*/_jsx(ReadCommunity,{_id:modalInput})]})]});};export default Communities;","map":{"version":3,"sources":["C:/Users/kimseonjin/Documents/GitHub/HappyHouse-Guide/front-end/src/source/communities.js"],"names":["React","useState","useEffect","axios","$","Modal","ModalHeader","CreateCommunity","ReadCommunity","Moment","Pagination","useMediaQuery","Communities","props","modalInput","setModalInput","modalInputReply","setModalInputReply","modalCreateCommunity","setModalCreateCommunity","modalReadCommunity","setModalReadCommunity","toggleCreateCommunity","toggleReadCommunity","activityHistoryList","setActivityHistoryList","activityHistoryListOfMobile","setActivityHistoryListOfMobile","page","setPage","count","setCount","pageSize","setPageSize","handlePageChange","localStorage","setItem","window","location","reload","communityList","community","_id","writeDate","title","userId","content","communityListOfMobile","readCommunityCount","get","then","data","readActivityHistory","form","getItem","post","console","log","communitysList","map","off","on","Button","div","parent","td","children","eq","text","href","li","isPc","query","isMobile"],"mappings":"sLAAA,MAAOA,CAAAA,KAAP,EAAeC,QAAf,CAAyBC,SAAzB,KAAyC,OAAzC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAO,qBAAP,CACA,MAAOC,CAAAA,CAAP,KAAc,QAAd,CACA,OAAQC,KAAR,CAAeC,WAAf,KAAiC,YAAjC,CACA,MAAOC,CAAAA,eAAP,KAA4B,mBAA5B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iBAA1B,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,MAAOC,CAAAA,UAAP,KAAuB,sBAAvB,CACA,OAAQC,aAAR,KAA4B,kBAA5B,C,wFAEA,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,KAAD,CAAW,eACSZ,QAAQ,CAAC,GAAD,CADjB,wCACpBa,UADoB,eACRC,aADQ,8BAEmBd,QAAQ,CAAC,GAAD,CAF3B,yCAEpBe,eAFoB,eAEHC,kBAFG,8BAG6BhB,QAAQ,CAAC,KAAD,CAHrC,yCAGpBiB,oBAHoB,eAGEC,uBAHF,8BAIyBlB,QAAQ,CAAC,KAAD,CAJjC,yCAIpBmB,kBAJoB,eAIAC,qBAJA,eAK3B,GAAMC,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,SAAMH,CAAAA,uBAAuB,CACvD,CAACD,oBADsD,CAA7B,EAA9B,CAGA,GAAMK,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,SAAMF,CAAAA,qBAAqB,CAAC,CAACD,kBAAF,CAA3B,EAA5B,CAR2B,eAU2BnB,QAAQ,EAVnC,0CAUpBuB,mBAVoB,gBAUCC,sBAVD,gCAW2CxB,QAAQ,EAXnD,2CAWpByB,2BAXoB,gBAWSC,8BAXT,gCAaH1B,QAAQ,CAAC,CAAD,CAbL,2CAapB2B,IAboB,gBAadC,OAbc,gCAcD5B,QAAQ,EAdP,2CAcpB6B,KAdoB,gBAcbC,QAda,gCAeK9B,QAAQ,CAAC,CAAD,CAfb,2CAepB+B,QAfoB,gBAeVC,WAfU,gBAiB3B,GAAMC,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAACN,IAAD,CAAU,CAC/BO,YAAY,CAACC,OAAb,CAAqB,MAArB,CAA6BR,IAA7B,EACAS,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACH,CAHD,CAKA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,SAAD,qBAClB,WAAI,SAAS,CAAC,IAAd,CAAuC,EAAE,CAAEA,SAAS,CAACC,GAArD,uBAEI,aAAK,KAAK,CAAC,iBAAX,CAA6B,EAAE,CAAC,QAAhC,CAAyC,OAAO,KAAhD,wBACI,WAAI,SAAS,CAAC,IAAd,UAAoBD,SAAS,CAACC,GAA9B,EADJ,cAEI,WAAI,SAAS,CAAC,IAAd,UAAoBD,SAAS,CAACE,SAA9B,EAFJ,cAGI,WAAI,EAAE,CAAC,QAAP,CAAgB,SAAS,CAAE,eAA3B,uBACI,0BAAMF,SAAS,CAACG,KAAhB,OADJ,EAHJ,cAOI,kCACI,cAAO,KAAK,CAAC,WAAb,uBACI,mCACI,WAAI,EAAE,CAAC,GAAP,gCADJ,cAEI,oBAAKH,SAAS,CAACI,MAAf,EAFJ,cAGI,WAAI,EAAE,CAAC,GAAP,gCAHJ,cAII,iCACI,KAAC,MAAD,EAAQ,MAAM,CAAC,UAAf,UAA2BJ,SAAS,CAACE,SAArC,EADJ,EAJJ,GADJ,EADJ,EAPJ,cAoBI,YAAK,KAAK,CAAC,mBAAX,UACKF,SAAS,CAACK,OADf,EApBJ,cAuBI,aAvBJ,cAwBI,YAAK,SAAS,CAAC,kBAAf,uBACI,eAAQ,EAAE,CAAC,eAAX,CAA2B,SAAS,CAAE,oBAAtC,0BADJ,EAxBJ,cA4BI,aA5BJ,GAFJ,EAAwBL,SAAS,CAACC,GAAlC,CADkB,EAAtB,CAoCA,GAAMK,CAAAA,qBAAqB,CAAG,QAAxBA,CAAAA,qBAAwB,CAACN,SAAD,qBAE1B,WAAI,SAAS,CAAC,IAAd,CAAuC,EAAE,CAAEA,SAAS,CAACC,GAArD,uBAEI,aAAK,KAAK,CAAC,4CAAX,CAAwD,EAAE,CAAC,QAA3D,wBACI,WAAI,SAAS,CAAC,IAAd,UAAoBD,SAAS,CAACC,GAA9B,EADJ,cAEI,WAAI,SAAS,CAAC,IAAd,UAAoBD,SAAS,CAACE,SAA9B,EAFJ,cAII,YAAK,GAAG,CAAC,mCAAT,CAA6C,KAAK,CAAC,gBAAnD,EAJJ,cAKI,aAAK,KAAK,CAAC,SAAX,wBACI,WAAI,KAAK,CAAC,MAAV,UAAkBF,SAAS,CAACI,MAA5B,EADJ,cAEI,KAAC,MAAD,EAAQ,MAAM,CAAC,iCAAf,CAAkC,SAAS,CAAE,WAA7C,UAA0DJ,SAAS,CAACE,SAApE,EAFJ,GALJ,cAWI,WAAI,EAAE,CAAC,QAAP,CAAgB,SAAS,CAAE,eAA3B,uBACI,WAAI,SAAS,CAAG,cAAhB,UAAgCF,SAAS,CAACG,KAA1C,EADJ,EAXJ,cAeI,YAAK,KAAK,CAAC,mBAAX,UACKH,SAAS,CAACK,OADf,EAfJ,GAFJ,EAAwBL,SAAS,CAACC,GAAlC,CAF0B,EAA9B,CA0BA,QAASM,CAAAA,kBAAT,EAA8B,CAE1B7C,KAAK,CACA8C,GADL,CACS,+EADT,EAEKC,IAFL,CAEU,cAAY,IAAVC,CAAAA,IAAU,MAAVA,IAAU,CACdpB,QAAQ,CAACoB,IAAI,CAACrB,KAAN,CAAR,CACH,CAJL,EAKH,CACD,QAASsB,CAAAA,mBAAT,EAA+B,CAC3B,GAAIC,CAAAA,IAAI,CAAC,CACNzB,IAAI,CAAEO,YAAY,CAACmB,OAAb,CAAqB,MAArB,CADA,CAAT,CAGAnD,KAAK,CACAoD,IADL,CACU,oFADV,CAC+FF,IAD/F,EAEKH,IAFL,CAEU,eAAY,IAAVC,CAAAA,IAAU,OAAVA,IAAU,CACdK,OAAO,CAACC,GAAR,CAAY7B,IAAZ,EACAuB,IAAI,CAAGA,IAAI,CAACO,cAAZ,CACAjC,sBAAsB,CAAC0B,IAAI,CAACQ,GAAL,CAASnB,aAAT,CAAD,CAAtB,CACAb,8BAA8B,CAACwB,IAAI,CAACQ,GAAL,CAASZ,qBAAT,CAAD,CAA9B,CACH,CAPL,EAQH,CACD3C,CAAC,CAAC,UAAY,CACVA,CAAC,CAAC,gBAAD,CAAD,CAAoBwD,GAApB,CAAwB,OAAxB,EACAxD,CAAC,CAAC,wBAAD,CAAD,CAA4ByD,EAA5B,CAA+B,OAA/B,CAAwC,UAAY,CAEhD,GAAIC,CAAAA,MAAM,CAAG1D,CAAC,CAAC,IAAD,CAAd,CAEA,GAAI2D,CAAAA,GAAG,CAAGD,MAAM,CAACE,MAAP,EAAV,CACA,GAAIC,CAAAA,EAAE,CAAGF,GAAG,CAACG,QAAJ,EAAT,CACAnD,aAAa,CAACkD,EAAE,CAACE,EAAH,CAAM,CAAN,EAASC,IAAT,EAAD,CAAb,CACA9C,qBAAqB,GACxB,CARD,EASAlB,CAAC,CAAC,sBAAD,CAAD,CAA0ByD,EAA1B,CAA6B,OAA7B,CAAsC,UAAY,CAE9C,GAAIC,CAAAA,MAAM,CAAG1D,CAAC,CAAC,IAAD,CAAd,CACA,GAAI2D,CAAAA,GAAG,CAAGD,MAAM,CAACE,MAAP,GAAgBA,MAAhB,EAAV,CACA,GAAIC,CAAAA,EAAE,CAAGF,GAAG,CAACG,QAAJ,EAAT,CACAnD,aAAa,CAACkD,EAAE,CAACE,EAAH,CAAM,CAAN,EAASC,IAAT,EAAD,CAAb,CACAjC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAoCtB,UAApC,EACAqB,YAAY,CAACC,OAAb,CAAqB,SAArB,CAA+BpB,eAA/B,EACA,GAAGmB,YAAY,CAACmB,OAAb,CAAqB,cAArB,GAAsC,GAAzC,CAA6C,CACzCjB,MAAM,CAACC,QAAP,CAAgB+B,IAAhB,CAAsB,qBAAtB,CACH,CAEJ,CAZD,EAaAjE,CAAC,CAAC,qBAAD,CAAD,CAAyByD,EAAzB,CAA4B,OAA5B,CAAqC,UAAY,CAE7C,GAAIC,CAAAA,MAAM,CAAG1D,CAAC,CAAC,IAAD,CAAd,CACA,GAAI2D,CAAAA,GAAG,CAAGD,MAAM,CAACE,MAAP,GAAgBA,MAAhB,EAAV,CACA,GAAIC,CAAAA,EAAE,CAAGF,GAAG,CAACG,QAAJ,EAAT,CACAnD,aAAa,CAACkD,EAAE,CAACE,EAAH,CAAM,CAAN,EAASC,IAAT,EAAD,CAAb,CACAnD,kBAAkB,CAACgD,EAAE,CAACE,EAAH,CAAM,CAAN,EAASC,IAAT,EAAD,CAAlB,CACAjC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAoCtB,UAApC,EACAqB,YAAY,CAACC,OAAb,CAAqB,SAArB,CAA+BpB,eAA/B,EACA,GAAGmB,YAAY,CAACmB,OAAb,CAAqB,cAArB,GAAsC,GAAtC,EAA6CnB,YAAY,CAACmB,OAAb,CAAqB,SAArB,GAAiC,GAAjF,CAAqF,CACjFjB,MAAM,CAACC,QAAP,CAAgB+B,IAAhB,CAAsB,oBAAtB,CACH,CACJ,CAZD,EAcAjE,CAAC,CAAC,6BAAD,CAAD,CAAiCyD,EAAjC,CAAoC,OAApC,CAA6C,UAAY,CAErD,GAAIS,CAAAA,EAAE,CAAGlE,CAAC,CAAC,IAAD,CAAV,CACA,GAAI2D,CAAAA,GAAG,CAAGO,EAAE,CAACJ,QAAH,EAAV,CACAnD,aAAa,CAACgD,GAAG,CAACI,EAAJ,CAAO,CAAP,EAAUC,IAAV,EAAD,CAAb,CACAnD,kBAAkB,CAAC8C,GAAG,CAACI,EAAJ,CAAO,CAAP,EAAUC,IAAV,EAAD,CAAlB,CACAjC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAoCtB,UAApC,EACAqB,YAAY,CAACC,OAAb,CAAqB,SAArB,CAA+BpB,eAA/B,EACA,GAAGmB,YAAY,CAACmB,OAAb,CAAqB,cAArB,GAAsC,GAAtC,EAA6CnB,YAAY,CAACmB,OAAb,CAAqB,SAArB,GAAiC,GAAjF,CAAqF,CACjFjB,MAAM,CAACC,QAAP,CAAgB+B,IAAhB,CAAsB,oBAAtB,CACH,CACJ,CAXD,EAYH,CAlDA,CAAD,CAoDAnE,SAAS,CAAC,UAAM,CACZ8C,kBAAkB,GAClBI,mBAAmB,GAAI;AAC1B,CAHQ,CAGN,EAHM,CAAT,CAOA,GAAMmB,CAAAA,IAAI,CAAG5D,aAAa,CAAC,CAAC6D,KAAK,CAAE,oBAAR,CAAD,CAA1B,CACA,GAAMC,CAAAA,QAAQ,CAAG9D,aAAa,CAAC,CAAC6D,KAAK,CAAE,mBAAR,CAAD,CAA9B,CAGA,mBACI,aAAK,SAAS,CAAC,IAAf,wBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,YAAK,EAAE,CAAC,OAAR,sCADJ,EADJ,CAIKD,IAAI,eACL,aAAK,SAAS,CAAC,qBAAf,wBACI,eAAQ,EAAE,CAAC,yBAAX,uBACI,wCADJ,EADJ,cAII,eAAQ,EAAE,CAAC,kBAAX,CAA8B,SAAS,CAAE,uBAAzC,gCAJJ,GALJ,CAYKE,QAAQ,eAET,eAAQ,EAAE,CAAC,kBAAX,CAA8B,SAAS,CAAE,uBAAzC,gCAdJ,GADJ,CAmBMF,IAAI,EAAI/C,mBAnBd,CAoBMiD,QAAQ,EAAI/C,2BApBlB,cAsBI,YAAK,EAAE,CAAC,QAAR,uBACI,YAAK,KAAK,CAAC,YAAX,uBAUK,KAAC,UAAD,EACW,UAAU,CAAEI,KADvB,CAEW,QAAQ,CAAEE,QAFrB,CAGW,WAAW,CAAE,CAHxB,CAIW,YAAY,CAAEE,gBAJzB,EAVL,EADJ,EAtBJ,cA0CI,MAAC,KAAD,EAAO,MAAM,CAAEhB,oBAAf,wBACI,KAAC,WAAD,EAAa,MAAM,CAAEI,qBAArB,sCADJ,cAEI,KAAC,eAAD,IAFJ,GA1CJ,cA+CI,MAAC,KAAD,EAAO,MAAM,CAAEF,kBAAf,wBACI,KAAC,WAAD,EAAa,MAAM,CAAEG,mBAArB,sCADJ,cAEI,KAAC,aAAD,EAAe,GAAG,CAAET,UAApB,EAFJ,GA/CJ,GADJ,CAuDH,CA/ND,CAgOA,cAAeF,CAAAA,WAAf","sourcesContent":["import React, {useState, useEffect} from 'react';\r\nimport axios from 'axios'\r\nimport './css/community.css'\r\nimport $ from 'jquery';\r\nimport {Modal, ModalHeader} from 'reactstrap';\r\nimport CreateCommunity from './CreateCommunity'\r\nimport ReadCommunity from './ReadCommunity';\r\nimport Moment from 'react-moment'\r\nimport Pagination from '../source/Pagination'\r\nimport {useMediaQuery} from \"react-responsive\";\r\n\r\nconst Communities = (props) => {\r\n    const [modalInput, setModalInput] = useState(\"0\");\r\n    const [modalInputReply, setModalInputReply] = useState(\"0\");\r\n    const [modalCreateCommunity, setModalCreateCommunity] = useState(false);\r\n    const [modalReadCommunity, setModalReadCommunity] = useState(false);\r\n    const toggleCreateCommunity = () => setModalCreateCommunity(\r\n        !modalCreateCommunity\r\n    );\r\n    const toggleReadCommunity = () => setModalReadCommunity(!modalReadCommunity);\r\n\r\n    const [activityHistoryList, setActivityHistoryList] = useState();\r\n    const [activityHistoryListOfMobile, setActivityHistoryListOfMobile] = useState();\r\n    \r\n    const [page, setPage] = useState(1);\r\n    const [count, setCount] = useState();\r\n    const [pageSize, setPageSize] = useState(3);\r\n    \r\n    const handlePageChange = (page) => {\r\n        localStorage.setItem(\"page\", page);\r\n        window.location.reload();\r\n    }\r\n\r\n    const communityList = (community) => (\r\n        <li className=\"li\" key={community._id} id={community._id}>\r\n\r\n            <div class=\"community-block\" id=\"second\" onClick>\r\n                <td className=\"id\">{community._id}</td>\r\n                <td className=\"id\">{community.writeDate}</td>\r\n                <td id=\"header\" className={\"readCommunity\"}>\r\n                    <h4>[{community.title}]</h4>\r\n                </td>\r\n\r\n                <div>\r\n                    <table class=\"houseInfo\">\r\n                        <tr>\r\n                            <td id=\"a\">작성자</td>\r\n                            <td>{community.userId}</td>\r\n                            <td id=\"a\">작성일</td>\r\n                            <td>\r\n                                <Moment format=\"YY.MM.DD\">{community.writeDate}</Moment>\r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                </div>\r\n\r\n                <div class=\"community-content\">\r\n                    {community.content}\r\n                </div>\r\n                <br></br>\r\n                <div className=\"button-container\">\r\n                    <button id=\"review-upload\" className={\"readCommunityReply\"}>댓글</button>\r\n                    {/* <button id=\"review-upload\" className={\"readCommunityDetail\"}>수정/삭제</button> */}\r\n                </div>\r\n                <br></br>\r\n            </div>\r\n        </li>\r\n    );\r\n\r\n    const communityListOfMobile = (community) => (\r\n\r\n        <li className=\"li\" key={community._id} id={community._id}>\r\n        \r\n            <div class=\"community-block readCommunityReplyOnMobile\" id=\"second\">\r\n                <td className=\"id\">{community._id}</td>\r\n                <td className=\"id\">{community.writeDate}</td>\r\n\r\n                <img src=\"https://cf-fpi.everytime.kr/0.png\" class=\"picture-medium\"></img>\r\n                <div class=\"profile\">\r\n                    <h3 class=\"user\">{community.userId}</h3>\r\n                    <Moment format=\"작성일 : YYYY.MM.DD\" className =\"writeDate\">{community.writeDate}</Moment>\r\n                    \r\n                </div>\r\n\r\n                <td id=\"header\" className={\"readCommunity\"}>\r\n                    <h4 className = \"header-title\">{community.title}</h4>\r\n                </td>\r\n\r\n                <div class=\"community-content\">\r\n                    {community.content}\r\n                </div>\r\n            </div>\r\n        </li>\r\n    );\r\n\r\n    function readCommunityCount() {\r\n\r\n        axios\r\n            .get('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities')\r\n            .then(({data}) => {\r\n                setCount(data.count);\r\n            })\r\n    }\r\n    function readActivityHistory() {\r\n        var form={\r\n           page: localStorage.getItem(\"page\")\r\n        };\r\n        axios\r\n            .post('https://joj5opq81m.execute-api.us-east-2.amazonaws.com/happyhouse/communities/page',form)\r\n            .then(({data}) => {\r\n                console.log(page);\r\n                data = data.communitysList\r\n                setActivityHistoryList(data.map(communityList))\r\n                setActivityHistoryListOfMobile(data.map(communityListOfMobile))\r\n            })\r\n    }\r\n    $(function () {\r\n        $(\".readCommunity\").off(\"click\")\r\n        $(\".createCommunityButton\").on(\"click\", function () {\r\n\r\n            var Button = $(this);\r\n\r\n            var div = Button.parent();\r\n            var td = div.children();\r\n            setModalInput(td.eq(0).text());\r\n            toggleCreateCommunity();\r\n        })\r\n        $(\".readCommunityDetail\").on(\"click\", function () {\r\n\r\n            var Button = $(this);\r\n            var div = Button.parent().parent();\r\n            var td = div.children();\r\n            setModalInput(td.eq(0).text());\r\n            localStorage.setItem(\"community_id\",modalInput);\r\n            localStorage.setItem(\"groupId\",modalInputReply);\r\n            if(localStorage.getItem(\"community_id\")!=\"0\"){\r\n                window.location.href ='/communities/detail'\r\n            }\r\n        \r\n        })\r\n        $(\".readCommunityReply\").on(\"click\", function () {\r\n\r\n            var Button = $(this);\r\n            var div = Button.parent().parent();\r\n            var td = div.children();\r\n            setModalInput(td.eq(0).text());\r\n            setModalInputReply(td.eq(1).text());\r\n            localStorage.setItem(\"community_id\",modalInput);\r\n            localStorage.setItem(\"groupId\",modalInputReply);\r\n            if(localStorage.getItem(\"community_id\")!=\"0\" && localStorage.getItem(\"groupId\")!=\"0\"){\r\n                window.location.href ='/communities/reply'\r\n            }\r\n        })\r\n        \r\n        $(\".readCommunityReplyOnMobile\").on(\"click\", function () {\r\n\r\n            var li = $(this);\r\n            var div = li.children();\r\n            setModalInput(div.eq(0).text());\r\n            setModalInputReply(div.eq(1).text());\r\n            localStorage.setItem(\"community_id\",modalInput);\r\n            localStorage.setItem(\"groupId\",modalInputReply);\r\n            if(localStorage.getItem(\"community_id\")!=\"0\" && localStorage.getItem(\"groupId\")!=\"0\"){\r\n                window.location.href ='/communities/reply'\r\n            }\r\n        })\r\n    })\r\n\r\n    useEffect(() => {\r\n        readCommunityCount();\r\n        readActivityHistory(); //getlist\r\n    }, []);\r\n\r\n    \r\n\r\n    const isPc = useMediaQuery({query: \"(min-width: 601px)\"})\r\n    const isMobile = useMediaQuery({query: \"(max-width: 600px\"})\r\n\r\n\r\n    return (\r\n        <div className=\"dv\">\r\n            <div className=\"createCommunity\">\r\n                <div className=\"community-title\">\r\n                    <div id=\"title\">커뮤니티</div>\r\n                </div>\r\n                {isPc&&\r\n                <div className=\"search-button-group\">\r\n                    <select id=\"community-search-option\">\r\n                        <option>제목</option>\r\n                    </select>\r\n                    <button id=\"community-upload\" className={\"createCommunityButton\"}>글쓰기</button>\r\n                </div>\r\n                }\r\n                {isMobile&&\r\n                \r\n                <button id=\"community-upload\" className={\"createCommunityButton\"}>글쓰기</button>\r\n                }\r\n            </div>\r\n\r\n            { isPc && activityHistoryList}\r\n            { isMobile && activityHistoryListOfMobile}\r\n\r\n            <div id=\"center\">\r\n                <div class=\"pagination\">\r\n                  \r\n                   \r\n                    {/* <a onClick={pageChange1}>&laquo;</a>\r\n                    <a onClick={pageChange1}>1</a>\r\n                    <a onClick={pageChange2}>2</a>\r\n                    <a onClick={pageChange3}>3</a>\r\n                    <a onClick={pageChange4}>4</a>\r\n                    <a onClick={pageChange5}>5</a>\r\n                    <a onClick={pageChange5}>&raquo;</a> */}\r\n                     <Pagination\r\n                                itemsCount={count}\r\n                                pageSize={pageSize}\r\n                                currentPage={1}\r\n                                onPageChange={handlePageChange}/>           \r\n                  \r\n                </div>\r\n            </div>\r\n\r\n            <Modal isOpen={modalCreateCommunity} >\r\n                <ModalHeader toggle={toggleCreateCommunity}>커뮤니티</ModalHeader>\r\n                <CreateCommunity></CreateCommunity>\r\n            </Modal>\r\n\r\n            <Modal isOpen={modalReadCommunity}>\r\n                <ModalHeader toggle={toggleReadCommunity}>커뮤니티</ModalHeader>\r\n                <ReadCommunity _id={modalInput}></ReadCommunity>\r\n            </Modal>\r\n\r\n        </div>\r\n    );\r\n}\r\nexport default Communities;"]},"metadata":{},"sourceType":"module"}